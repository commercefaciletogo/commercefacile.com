commercefacile-db:
  environment:
    - POSTGRES_DB=commercefacile_prod
    - POSTGRES_USER=commercefacile_prod
    - POSTGRES_PASSWORD=Ls4XYlaxIcCyNspsk6j2PlRKEA6FZ1Rl1o0=
  image: 'postgres:latest'
  ports:
    - '5432:5432'

commercefacile-redis:
  image: 'sameersbn/redis:latest'
  ports:
    - '6379:6379'
  volumes:
    - '/srv/docker/redis:/var/lib/redis'

commercefacile-server:
  autoredeploy: true
  image: 'commercefacile/server:latest'
  links:
    - commercefacile-db
    - commercefacile-redis
  privileged: true
  volumes:
    - /var/www/public

commercefacile-socket:
  image: 'commercefacile/socket:latest'
  links:
    - 'commercefacile-redis:redis'
  ports:
    - '6001:6001'

nginx:
  autoredeploy: true
  image: 'commercefacile/nginx:latest'
  links:
    - commercefacile-server
  ports:
    - '80:80'
    - '443:443'
  volumes_from:
    - commercefacile-server
