nginx:
  image: thomasdolar/commercefacile_nginx
  links:
    - commercefacile-server
  volumes_from:
    - commercefacile-server
  ports:
    - "80:80"
    - "443:443"

commercefacile-server:
  image: thomasdolar/commercefacile
  privileged: true
  volumes:
    - /var/www
  links:
    - commercefacile-db
    - commercefacile-queue
    - commercefacile-redis

commercefacile-db:
  image: postgres:latest
  ports:
    - "5432:5432"
  environment:
    - POSTGRES_DB=commercefacile
    - POSTGRES_USER=commercefacile
    - POSTGRES_PASSWORD=commercefacile

commercefacile-queue:
  image: thomasdolar/beanstalkd
  ports:
    - "11300:11300"
    - "8080:8080"

commercefacile-redis:
  image: sameersbn/redis
  volumes:
    - /srv/docker/redis:/var/lib/redis
  ports:
    - "6379:6379"

commercefacile-socket:
  image: thomasdolar/commercefacile_socket
  links:
    - commercefacile-redis:redis
  ports:
    - "6001:6001"