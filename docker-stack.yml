commercefacile-db:
  environment:
    - POSTGRES_DB=commercefacile
    - POSTGRES_PASSWORD=commercefacile
    - POSTGRES_USER=commercefacile
  image: 'postgres:latest'
  ports:
    - '5432:5432'
commercefacile-queue:
  image: 'thomasdolar/beanstalkd:latest'
  ports:
    - '8080:8080'
    - '11300:11300'
commercefacile-redis:
  image: 'sameersbn/redis:latest'
  ports:
    - '6379:6379'
  volumes:
    - '/srv/docker/redis:/var/lib/redis'
commercefacile-server:
  autoredeploy: true
  image: 'thomasdolar/commercefacile:latest'
  links:
    - commercefacile-db
    - commercefacile-queue
    - commercefacile-redis
  privileged: true
  volumes:
    - /var/www/public
commercefacile-socket:
  image: 'thomasdolar/commercefacile_socket:latest'
  links:
    - 'commercefacile-redis:redis'
  ports:
    - '6001:6001'
nginx:
  autoredeploy: true
  image: 'thomasdolar/commercefacile_nginx:latest'
  links:
    - commercefacile-server
  ports:
    - '80:80'
    - '443:443'
  volumes_from:
    - commercefacile-server
